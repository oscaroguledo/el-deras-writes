# Render Deployment Guide

This guide explains how to deploy the El Deras Writes Django backend to Render using your existing Neon PostgreSQL database.

## üöÄ Quick Deploy

### Option 1: Using render.yaml (Recommended)

1. **Push to GitHub**: Ensure your code is pushed to GitHub
2. **Connect to Render**: 
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New" ‚Üí "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file

### Option 2: Manual Setup

1. **Create Web Service**:
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New" ‚Üí "Web Service"
   - Connect your GitHub repository
   - Select the repository: `el-deras-writes`

2. **Configure Build Settings**:
   ```
   Name: el-deras-writes-backend
   Environment: Python 3
   Build Command: cd backend && pip install -r requirements.txt
   Start Command: cd backend && gunicorn blog_project.wsgi:application
   ```

3. **Set Environment Variables**:
   ```
   PYTHON_VERSION=3.11.0
   DEBUG=False
   SECRET_KEY=[Auto-generated by Render]
   DATABASE_URL=postgresql://neondb_owner:npg_kY3JEwGm6ABt@ep-snowy-shape-ah59xj71-pooler.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require
   ALLOWED_HOSTS=your-app-name.onrender.com,.onrender.com
   CORS_ALLOWED_ORIGINS=https://elderawrites.netlify.app,http://localhost:3000
   ```

## üìä Database Configuration

### Using Existing Neon Database

‚úÖ **Already Configured**: Your `render.yaml` is set up to use your existing Neon PostgreSQL database:
- **Host**: `ep-snowy-shape-ah59xj71-pooler.c-3.us-east-1.aws.neon.tech`
- **Database**: `neondb`
- **User**: `neondb_owner`
- **SSL**: Required with channel binding

**No additional database setup needed!** Your Django app will connect to the same Neon database you're already using.

## üîß Configuration Files Created

### `render.yaml`
- Defines your entire infrastructure as code
- Automatically creates web service and database
- Sets up environment variables

### `backend/build.sh`
- Runs database migrations
- Creates superuser
- Collects static files
- Executable build script for Render

## üåê Environment Variables

| Variable | Value | Description |
|----------|-------|-------------|
| `PYTHON_VERSION` | `3.11.0` | Python version |
| `DEBUG` | `False` | Production mode |
| `SECRET_KEY` | Auto-generated | Django secret key |
| `DATABASE_URL` | Neon connection string | Your existing Neon database |
| `ALLOWED_HOSTS` | Your Render domain | Allowed hostnames |
| `CORS_ALLOWED_ORIGINS` | Your frontend URLs | CORS configuration |

## üöÄ Deployment Process

1. **Push Code**: 
   ```bash
   git add .
   git commit -m "Add Render deployment configuration"
   git push origin main
   ```

2. **Deploy on Render**:
   - Render will automatically detect changes
   - Build process will run `build.sh`
   - Start process will run gunicorn

3. **Verify Deployment**:
   - Check build logs for any errors
   - Visit your Render URL
   - Test API endpoints

## üìç Access Points

After deployment, your backend will be available at:
- **API Base**: `https://your-app-name.onrender.com/api/`
- **Admin Panel**: `https://your-app-name.onrender.com/admin/`
- **Health Check**: `https://your-app-name.onrender.com/api/health/`

## üîê Admin Access

Default admin credentials (change after first login):
- **Email**: `admin@gmail.com`
- **Password**: `admin`

## üîÑ Automatic Deployments

- **Auto-deploy**: Enabled on push to main branch
- **Build time**: ~3-5 minutes
- **Zero-downtime**: Render handles deployment gracefully

## üí∞ Pricing

- **Web Service**: 
  - Free Tier: 750 hours/month (enough for personal projects)
  - Starter: $7/month for always-on service
- **Database**: Using your existing Neon database (no additional cost on Render)

## üõ†Ô∏è Troubleshooting

### Build Fails
- Check build logs in Render dashboard
- Ensure all dependencies are in `requirements.txt`
- Verify Python version compatibility

### Database Connection Issues
- Ensure `DATABASE_URL` is set correctly
- Check PostgreSQL service is running
- Verify database credentials

### CORS Errors
- Update `CORS_ALLOWED_ORIGINS` with your frontend URL
- Ensure frontend is using HTTPS in production

### Static Files Not Loading
- Ensure `collectstatic` runs in build script
- Check `STATIC_ROOT` and `STATIC_URL` settings

## üîß Advanced Configuration

### Custom Domain
1. Go to Settings ‚Üí Custom Domains
2. Add your domain
3. Configure DNS records as instructed
4. Update `ALLOWED_HOSTS` with your domain

### Environment-Specific Settings
```python
# In settings.py
RENDER_EXTERNAL_HOSTNAME = os.environ.get('RENDER_EXTERNAL_HOSTNAME')
if RENDER_EXTERNAL_HOSTNAME:
    ALLOWED_HOSTS.append(RENDER_EXTERNAL_HOSTNAME)
```

### Health Checks
Render automatically monitors your service health at `/` endpoint.

## üìö Next Steps

1. **Update Frontend**: Update your frontend's API URL to point to Render
2. **SSL Certificate**: Render provides free SSL certificates
3. **Monitoring**: Use Render's built-in monitoring and logs
4. **Scaling**: Upgrade to paid plans for better performance

## üÜò Support

- [Render Documentation](https://render.com/docs)
- [Render Community](https://community.render.com)
- [Django on Render Guide](https://render.com/docs/deploy-django)

---

**Ready to deploy!** üöÄ Your Django backend is configured for Render deployment.